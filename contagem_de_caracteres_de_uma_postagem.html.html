<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Contagem de caracteres de uma postagem</title>
  </head>

  <body>

      <h1>Contagem de caracteres de uma postagem</h1>

      <label>O que você está pensando?</br></label>

      <textarea rows="8" cols="80" autofocus=""></textarea>
      <p>
        <output>0</output> caractere(s)
      </p>

      <script>

      var texto = document.getElementsByTagName('textarea')[0];
      texto.setAttribute('onkeypress', "max(this)");
      texto.setAttribute('onkeyup', "max(this)");

      var output = document.getElementsByTagName('output')[0];
      output.setAttribute('id', "digitado");

/**/  function max(txarea) {
        var total = 140;
        var tam = txarea.value.length;
        var str = "";
        str = str + tam;
        output.innerHTML = str;

        if(tam > total){
          var aux = txarea.value;
          txarea.value = aux.substring(0,total);
          output.innerHTML = total;
        }
      }

      </script>
  </body>
</html>
